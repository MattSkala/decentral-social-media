\documentclass[conference,compsoc]{IEEEtran}
\usepackage[utf8]{inputenc}
\usepackage{cite}

\usepackage[hyphens]{url}
\usepackage[hidelinks]{hyperref}
\hypersetup{breaklinks=true}


\begin{document}
 
\title{A Survey on Smartphone Ad Hoc Networks}

\author{\IEEEauthorblockN{Matouš Skála}
\IEEEauthorblockA{Delft University of Technology\\
Email: M.Skala@student.tudelft.nl}}

\maketitle

\begin{abstract}
Over the past few years, smartphones have become powerful devices that come equipped with numerous network connectivity modules. In addition to Bluetooth BR/EDR and Bluetooth Low Energy, most recent devices also come with support for Wi-Fi Direct and Wi-Fi Aware standards to facilitate the interconnection with nearby devices over longer distances and with higher bandwidth. 

In this survey, we discuss the current implementation of various connectivity APIs in Android OS and explore possibilities of deploying a large-scale smartphone ad hoc network. Additionally, we design a proof of concept Android application to demonstrate the feasibility of mesh networking within the constraints imposed by Android OS.

\end{abstract}

\begin{IEEEkeywords}mesh networks, mobile ad hoc networks\end{IEEEkeywords}

\section{Introduction}

The increasing popularity of smartphones and novel wireless networking technologies opens up possibilities to a whole new range of applications that can communicate without the need for the Internet connection. Prospective use cases are ranging from proximity-based social networks, infrastructure-less communication with \textit{Internet of Things (IoT)} devices, student attendance tracking, to communication between attendees during music festivals or protests, where the cellular network is either overloaded or censored \cite{forbes:hk}. 

Starting from Android 4.0, \textit{Wi-Fi Direct} \cite{android:wifip2p}, also referred to as Wi-Fi peer to peer, is directly supported by the system, allowing device to device Wi-Fi communication without an additional \textit{access point (AP)}. From Android 8.0, the \textit{Wi-Fi Aware} \cite{android:wifiaware} standard, also known as \textit{Neighbor Awareness Networking (NAN)}, has been supported, allowing to automatically form clusters of nearby devices.

Wi-Fi generally offers a higher range of coverage and bandwidth than \textit{Bluetooth}, so it might be more suitable for data-intensive applications such as photo or video sharing. On the other hand, Bluetooth is supported on a wider variety of devices and especially \textit{Bluetooth Low Energy (BLE)} \cite{android:ble} can result in significantly lower battery consumption, thus it is more suitable for transferring small amounts of data.

This survey is structured as follows. In Section \ref{wirelesstech}, we first explore features of all previously mentioned wireless communication protocols. In Section \ref{android}, we discuss their implementation and possible limitations within Android OS. In Section \ref{applications}, we explore different Android applications taking advantage of mesh networking for censorship resilient messaging. Finally, in Section \ref{poc} we present our proof of concept for deploying an ad hoc network with multi-hop routing on Android. Section \ref{conclusion} concludes this work.

\section{Wireless Communication Technologies} \label{wirelesstech}

\subsection{Bluetooth}
Bluetooth is a wireless data exchange standard supported by the majority of mobile devices. It enables point to point and mutipoint communication. 
To connect multiple devices, one device (a \textit{server}) first needs to make itself discoverable. On Android, the application can request device discoverability for a specified duration, but this action needs to be confirmed by the user in a dialog presented by the system. Then, other devices (\textit{clients}) can start scanning to find MAC addresses of nearby Bluetooth devices.

It is possible to create a channel between two devices using a \textit{RFCOMM}\footnote{Radio frequency communication} protocol. First, the server starts listening on a socket. The client then uses the discovered MAC address to connect to the server. This method allows to open a secure channel either between two \textit{paired} devices, or even an insecure one without need of going through the pairing process.

\subsection{Bluetooth Low Energy}
BLE was originally introduced as a power-efficient way to connect with peripherals to exchange small amounts of data. It offers a similar range as Bluetooth, but a lower throughput.

BLE devices are detected based on broadcasting advertising packets. There are two types of BLE devices: \textit{centrals} and \textit{peripherals}. The peripheral device starts by broadcasting an advertising packet limited to the size of 31 bytes. Central devices can then run a scanning process and filter advertising packets based on the MAC address, service UUID, or other parameters. It is important to note that the MAC received in advertising packets is not the physical MAC address if the devices are not paired, so it cannot be used to create the Bluetooth socket. \cite{ble:privacy} 

Instead, BLE devices usually communicate using the \textit{GATT}\footnote{Generic Attribute Profile} server. Both central and peripheral can act as a server or client. The GATT server allows to store short pieces of data known as \textit{attributes} in form of \textit{characteristics} and \textit{descriptors}. Once the client establishes the connection with the server, it can read or write supported attributes.

However, the advertising packet can also be abused to include the physical MAC address as part of the service UUID. Once the receiver extracts the physical MAC address from the packet, it can connect to the Bluetooth socket of the server. This has been up to date probably the most accessible way to connect two devices without user interaction. However, starting Android 8 it is no longer possible to obtain local MAC address programatically, so this solution would now require the user to copy the device MAC address from the system settings.

From Android 10, there is also a possibility to form a \textit{L2CAP}\footnote{Logical link control and adaptation protocol} channel between Bluetooth LE devices.

\subsection{WiFi Direct}
\subsection{WiFi Aware}

\section{Implementation in Android OS} \label{android}
\subsection{BluetoothManager}
\subsection{WifiP2pManager}
\subsection{WifiAwareManager}
\subsection{Nearby Connections API}

\section{Applications} \label{applications}
\subsection{Briar}
\subsection{Bridgefy}
\subsection{FireChat}
\subsection{The Serval Mesh}
\subsection{B.A.T.M.A.N.}

\section{Proof of Concept} \label{poc}
\section{Conclusion} \label{conclusion}

\bibliographystyle{IEEEtran}
\bibliography{IEEEabrv,mybibfile}

\end{document}
